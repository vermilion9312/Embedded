


#include "fnd_controller.h"
#define HIGH 1
#define LOW 0

void send(uint8_t x)
{
	for (int i = 8; i >= 1; i--)
	{
		if (x & 0x80)
		{
			HAL_GPIO_WritePin(PB15_FND_DIO_GPIO_Port, PB15_FND_DIO_Pin, HIGH);
		}
		else
		{
			HAL_GPIO_WritePin(PB15_FND_DIO_GPIO_Port, PB15_FND_DIO_Pin, LOW);
		}
		x <<= 1;
		HAL_GPIO_WritePin(PB13_FND_SCLK_GPIO_Port, PB13_FND_SCLK_Pin, LOW);
		HAL_GPIO_WritePin(PB13_FND_SCLK_GPIO_Port, PB13_FND_SCLK_Pin, HIGH);
	}
}

void send_port(uint8_t x, uint8_t prot)
{
	send(x);
	send(port);
	HAL_GPIO_WritePin(PB14_FND_RCLK_GPIO_Port, PB14_FND_RCLK_Pin, LOW);
	HAL_GPIO_WritePin(PB14_FND_RCLK_GPIO_Port, PB14_FND_RCLK_Pin, HIGH);

}
